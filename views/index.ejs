<%- include('layout/header') %>
<!-- Main Container -->

<div class="container">
  <!-- Left Sidebar -->

  <aside class="sidebar-left">
    <!-- Board Navigation -->

    <div class="sidebar-section">
      <h3 class="section-title">ğŸ¯ Workspaces</h3>
      <div class="board-nav">
        <a
          href="/?filter=Personal"
          class="board-item <%= (query.filter === 'Personal') ? 'active' : '' %>"
        >
          <svg class="board-icon" viewBox="0 0 24 24">
            <path
              d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"
            />
          </svg>
          Personal
          <span class="board-count"><%= personal %></span>
        </a>
        <a
          href="/?filter=Work"
          class="board-item <%= (query.filter === 'Work') ? 'active' : '' %>"
        >
          <svg class="board-icon" viewBox="0 0 24 24">
            <path
              d="M20 6h-2.5l-1.5-1.5h-5L9.5 6H7c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h13c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2z"
            />
          </svg>
          Work Projects
          <span class="board-count"><%= workCount %></span>
        </a>

        <a href="#habits" class="board-item">
          <svg class="board-icon" viewBox="0 0 24 24">
            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          Habits
          <span class="board-count">6</span>
        </a>
      </div>
    </div>

    <!-- Quick Stats -->
    <div class="sidebar-section">
      <h3 class="section-title">ğŸ“Š Quick Stats</h3>
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-number"><%= completedCount %></div>
          <div class="stat-label">Completed</div>
        </div>
        <div class="stat-item">
          <div class="stat-number"><%= pendingCount %></div>
          <div class="stat-label">Pending</div>
        </div>
      </div>
    </div>

    <!-- Flagged Tasks -->
    <div class="sidebar-section">
      <h3 class="section-title">â­ Flagged Tasks</h3>
      <div class="flagged-tasks">
        <div class="flagged-task">
          <div class="flagged-indicator"></div>
          <div class="flagged-content">
            <div class="flagged-title">Product Launch Meeting</div>
            <div class="flagged-time">Today, 2:00 PM</div>
          </div>
        </div>
        <div class="flagged-task">
          <div class="flagged-indicator"></div>
          <div class="flagged-content">
            <div class="flagged-title">Client Presentation</div>
            <div class="flagged-time">Tomorrow, 10:00 AM</div>
          </div>
        </div>
        <div class="flagged-task">
          <div class="flagged-indicator"></div>
          <div class="flagged-content">
            <div class="flagged-title">Code Review</div>
            <div class="flagged-time">Aug 3, 3:00 PM</div>
          </div>
        </div>
      </div>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Board Header -->
    <div class="board-header">
      <h1 class="board-title">Personal Tasks</h1>
      <div class="board-actions">
        <a href="/add" class="primary">
          <button class="action-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
            </svg>
            Add Task
          </button>
        </a>
      </div>
    </div>
    <div class="board-actions">
      <div class="action-btn">
        <% if (totalPages > 1) { %> <% if (currentPage > 1) { %>
        <a href="/?page=<%= currentPage - 1 %>">Previous</a>
        <% } %> <% for (let i = 1; i <= totalPages; i++) { %>
        <a
          href="/?page=<%= i %>"
          class="<%= i === currentPage ? 'active' : '' %>"
        >
          <%= i %>
        </a>
        <% } %> <% if (currentPage < totalPages) { %>
        <a href="/?page=<%= currentPage + 1 %>">Next</a>
        <% } %>
      </div>
      <% } %>
    </div>
    <!-- Task Board Tabs -->
    <!-- <div class="board-tabs">
      <a href="#all" class="tab-item active">All Tasks</a>
      <a href="#today" class="tab-item">Today</a>
      <a href="#upcoming" class="tab-item">Upcoming</a>
      <a href="#completed" class="tab-item">Completed</a>
    </div> -->

    <!-- Task Grid -->
    <div class="task-grid">
      <% if (lists != '') { %> <% lists.forEach(element => { %>

      <div class="task-card priority-high<%= element.priority %>">
        <div class="task-header">
          <div>
            <h3 class="task-title"><%= element.title %></h3>
            <div class="task-priority-badge">
              <%= element.priority.charAt(0).toUpperCase() +
              element.priority.slice(1) %> Priority
            </div>
          </div>
          <div class="task-actions">
            <button class="task-action starred">
              <svg
                width="14"
                height="14"
                viewBox="0 0 24 24"
                fill="<%= element.flag === 'Yes' ? 'gold' : 'currentColor' %>"
              >
                <path
                  d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
                />
              </svg>
            </button>

            <div class="task-action dropdown">
              <button class="task-action">
                <svg
                  width="14"
                  height="14"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                >
                  <path
                    d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"
                  />
                </svg>
              </button>
              <div class="dropdown-content">
                <a href="/edit/<%= element._id %>">Edit</a>
                <a
                  href="/delete/<%= element._id %>"
                  onclick="return confirm('Are you sure you want to delete this task?');"
                  >Delete</a
                >
              </div>
            </div>
          </div>
        </div>

        <p class="task-description" name="description" id="description"></p>

        <div class="task-meta">
          <div class="task-due-date">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2z"
              />
            </svg>
            <%= element.dueDate.toDateString() %>
          </div>
        </div>
      </div>
      <% }) %> <% } else {%>
      <h1 class="task-card priority-high">No List found in the database</h1>
      <% } %>
    </div>
  </main>

  <!-- Right Sidebar -->
  <aside class="sidebar-right">
    <!-- Focus Mode -->
    <div class="sidebar-section focus-mode">
      <div class="focus-content">
        <h3 class="focus-title">ğŸ¯ Focus Mode</h3>
        <p style="margin-bottom: 1rem; opacity: 0.9">
          Q4 Strategy Presentation
        </p>
        <div class="focus-timer">25:30</div>
        <div class="focus-progress">
          <div class="focus-progress-bar"></div>
        </div>
        <p style="font-size: 0.9rem; opacity: 0.8">Pomodoro Session Active</p>
      </div>
    </div>

    <!-- Calendar -->
    <div class="sidebar-section">
      <h3 class="section-title">ğŸ“… Calendar</h3>
      <div class="calendar">
        <div class="calendar-header">
          <button class="calendar-nav">â€¹</button>
          <div class="calendar-month">August 2025</div>
          <button class="calendar-nav">â€º</button>
        </div>
        <div class="calendar-grid">
          <div class="calendar-day" style="color: var(--text-muted)">S</div>
          <div class="calendar-day" style="color: var(--text-muted)">M</div>
          <div class="calendar-day" style="color: var(--text-muted)">T</div>
          <div class="calendar-day" style="color: var(--text-muted)">W</div>
          <div class="calendar-day" style="color: var(--text-muted)">T</div>
          <div class="calendar-day" style="color: var(--text-muted)">F</div>
          <div class="calendar-day" style="color: var(--text-muted)">S</div>
          <div class="calendar-day">27</div>
          <div class="calendar-day">28</div>
          <div class="calendar-day">29</div>
          <div class="calendar-day">30</div>
          <div class="calendar-day">31</div>
          <div class="calendar-day today">1</div>
          <div class="calendar-day">2</div>
          <div class="calendar-day has-task">3</div>
          <div class="calendar-day">4</div>
          <div class="calendar-day has-task">5</div>
          <div class="calendar-day">6</div>
          <div class="calendar-day">7</div>
          <div class="calendar-day has-task">8</div>
          <div class="calendar-day">9</div>
          <div class="calendar-day">10</div>
          <div class="calendar-day">11</div>
          <div class="calendar-day">12</div>
          <div class="calendar-day">13</div>
          <div class="calendar-day">14</div>
          <div class="calendar-day has-task">15</div>
          <div class="calendar-day">16</div>
          <div class="calendar-day">17</div>
          <div class="calendar-day">18</div>
          <div class="calendar-day">19</div>
          <div class="calendar-day has-task">20</div>
          <div class="calendar-day">21</div>
          <div class="calendar-day">22</div>
          <div class="calendar-day">23</div>
          <div class="calendar-day">24</div>
          <div class="calendar-day has-task">25</div>
          <div class="calendar-day">26</div>
          <div class="calendar-day">27</div>
          <div class="calendar-day">28</div>
          <div class="calendar-day">29</div>
          <div class="calendar-day">30</div>
          <div class="calendar-day">31</div>
        </div>
      </div>
    </div>

    <!-- Upcoming Reminders -->
    <div class="sidebar-section">
      <h3 class="section-title">ğŸ”” Upcoming</h3>
      <div class="upcoming-list">
        <div class="upcoming-item urgent">
          <div class="upcoming-dot"></div>
          <div class="upcoming-content">
            <div class="upcoming-title">Health Checkup</div>
            <div class="upcoming-time">Tomorrow at 2:00 PM</div>
          </div>
        </div>
        <div class="upcoming-item warning">
          <div class="upcoming-dot"></div>
          <div class="upcoming-content">
            <div class="upcoming-title">Strategy Presentation</div>
            <div class="upcoming-time">Aug 5 at 10:00 AM</div>
          </div>
        </div>
        <div class="upcoming-item normal">
          <div class="upcoming-dot"></div>
          <div class="upcoming-content">
            <div class="upcoming-title">Weekend Trip</div>
            <div class="upcoming-time">Aug 8-10</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Mood Tracker -->
    <div class="sidebar-section">
      <h3 class="section-title">ğŸ˜Š Daily Mood</h3>
      <div class="mood-tracker">
        <div class="mood-grid">
          <div class="mood-item">ğŸ˜¢</div>
          <div class="mood-item">ğŸ˜</div>
          <div class="mood-item selected">ğŸ˜Š</div>
          <div class="mood-item">ğŸ˜„</div>
          <div class="mood-item">ğŸ¤©</div>
        </div>
        <p
          style="
            font-size: 0.85rem;
            color: var(--text-muted);
            text-align: center;
          "
        >
          Feeling productive today!
        </p>
      </div>
    </div>

    <!-- Motivational Quote -->
    <div class="sidebar-section">
      <h3 class="sidebar-title">ğŸ’¡ Daily Inspiration</h3>
      <div class="quote-text">
        "The way to get started is to quit talking and begin doing."
      </div>
      <div class="quote-author">â€” Walt Disney</div>
    </div>
  </aside>
</div>
<%- include('layout/footer') %>
